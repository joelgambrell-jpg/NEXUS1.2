<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NEXUS</title>

  <style>
    :root{
      --bg:#b60000;
      --panel:rgba(255,255,255,0.22);
      --panel2:rgba(0,0,0,0.25);
      --btn-bg:#0a0f24;
      --btn-txt:#3ecbff;
      --accent:#00c2ff;
      --line:rgba(255,255,255,0.20);
    }
    *{ box-sizing:border-box; }
    html,body{ margin:0; font-family:Arial,Helvetica,sans-serif; color:#fff; background:var(--bg); }
    body{
      background-image:url("transformer.jpg");
      background-repeat:no-repeat;
      background-position:center center;
      background-size:cover;
      background-attachment:fixed;
    }
    .wrap{ min-height:100vh; display:flex; align-items:center; justify-content:center; padding:34px; }
    .card{
      width:100%; max-width:980px;
      background:var(--panel);
      border:1px solid var(--line);
      border-radius:18px;
      padding:26px;
      backdrop-filter:blur(10px);
    }
    header{ display:flex; align-items:flex-start; justify-content:space-between; gap:14px; flex-wrap:wrap; }
    h1{ margin:0; font-size:34px; font-weight:900; letter-spacing:0.2px; }
    .sub{ margin:6px 0 0; font-weight:800; opacity:0.95; }

    .grid{ display:grid; grid-template-columns: 1fr 1fr; gap:16px; margin-top:16px; }
    @media (max-width:780px){ .grid{ grid-template-columns:1fr; } }

    .panel{ background:var(--panel2); border:1px solid var(--line); border-radius:18px; padding:18px; }
    .title{ font-size:13px; font-weight:900; letter-spacing:0.12em; text-transform:uppercase; opacity:0.95; margin:0 0 12px; }

    label{ display:block; font-weight:900; margin:10px 0 8px; font-size:13px; opacity:0.95; }
    input[type="text"]{
      width:100%; padding:12px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.18);
      outline:none;
      font-size:16px;
      background:rgba(255,255,255,0.92);
      color:#111;
      font-weight:800;
    }
    .hint{ margin-top:10px; font-size:13px; line-height:1.35; opacity:0.92; }

    .actions{ display:flex; flex-wrap:wrap; gap:10px; margin-top:12px; }
    .btn{
      padding:12px 16px;
      font-size:15px;
      font-weight:900;
      border-radius:999px;
      color:var(--btn-txt);
      background:var(--btn-bg);
      border:2px solid var(--accent);
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      user-select:none;
    }
    .btn.secondary{
      background:rgba(0,0,0,0.20);
      color:#fff;
      border:2px solid rgba(255,255,255,0.35);
    }
    .btn:disabled{ opacity:0.6; cursor:not-allowed; }

    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      font-weight:900;
      font-size:13px;
      border:1px solid rgba(255,255,255,0.25);
      background:rgba(0,0,0,0.18);
      margin-top:10px;
    }

    footer{ margin-top:14px; font-size:0.9em; opacity:0.85; text-align:center; }
    code{ background:rgba(0,0,0,0.35); padding:2px 6px; border-radius:6px; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <header>
        <div>
          <h1>NEXUS</h1>
          <div class="sub">Mission Critical Construction Data Centralization</div>
        </div>
        <div class="chip" id="statusChip">Ready</div>
      </header>

      <div class="grid">
        <section class="panel">
          <div class="title">Open Equipment</div>

          <label for="eqInput">Equipment ID</label>
          <input id="eqInput" type="text" placeholder="TR-001" autocomplete="off" autocapitalize="characters" />

          <div class="actions">
            <button class="btn" id="openBtn" type="button">Open Equipment Page</button>
            <a class="btn secondary" id="qrBtn" href="qr.html">Generate QR</a>
          </div>

          <div class="hint">
            QR codes should encode a URL like:<br>
            <code>equipment.html?eq=TR-001</code><br>
            Scanning a QR should land on the equipment page and keep <code>eq</code> through every task.
          </div>
        </section>

        <section class="panel">
          <div class="title">Quick Links</div>

          <div class="actions">
            <a class="btn secondary" href="qr.html">QR Generator</a>
            <a class="btn secondary" href="scan.html">Scan QR</a>
            <a class="btn secondary" href="submit.html">Submission History</a>
          </div>

          <div class="hint">
            If you arrived here from a QR code (with <code>?eq=</code>), you will be redirected to the correct equipment page automatically.
          </div>
        </section>
      </div>

      <footer>
        Â© Intellectual Property of NEXUS Data Science. Created in joint venture with ACE Electric. All rights reserved.
      </footer>
    </div>
  </div>

  <script>
    const chip = document.getElementById('statusChip');
    const eqInput = document.getElementById('eqInput');
    const openBtn = document.getElementById('openBtn');
    const qrBtn = document.getElementById('qrBtn');

    function setChip(text){ chip.textContent = text; }

    // If someone hits /?eq=TR-001, send them straight to the equipment page.
    (function autoRedirect(){
      const qs = new URLSearchParams(location.search);
      const eq = (qs.get('eq') || '').trim();
      if (eq){
        location.replace(`equipment.html?eq=${encodeURIComponent(eq)}`);
      }
    })();

    function normalizeEq(s){
      return (s || '').trim();
    }

    function updateLinks(){
      const eq = normalizeEq(eqInput.value);
      qrBtn.href = `qr.html${eq ? `?eq=${encodeURIComponent(eq)}` : ''}`;
    }

    eqInput.addEventListener('input', updateLinks);
    updateLinks();

    openBtn.addEventListener('click', () => {
      const eq = normalizeEq(eqInput.value);
      if (!eq){
        setChip('Enter an Equipment ID');
        eqInput.focus();
        return;
      }
      location.href = `equipment.html?eq=${encodeURIComponent(eq)}`;
    });

    // Press Enter in the equipment field
    eqInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') openBtn.click();
    });
  </script>
</body>
</html>
